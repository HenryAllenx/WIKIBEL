import{a as E,c as I,e as F,j as k}from"./chunk-PIG74YNB.js";import{a as T}from"./chunk-LMH4AEN2.js";import{a as y}from"./chunk-H4AUIJL3.js";import{d as w}from"./chunk-24R3UN2Z.js";import{g as O}from"./chunk-B4W7MAE2.js";import{$ as x,Da as P,Ha as h,Oa as m,Pa as v,Qa as a,Ra as r,Sa as S,Va as M,Wa as p,Xa as u,_,_a as d,ab as R,bb as g,cb as b,db as f,ua as s,za as l}from"./chunk-MTZBWO7P.js";function B(c,t){if(c&1){let e=M();a(0,"button",10),p("click",function(){let n=_(e).$implicit,i=u();return x(i.togglePonto(n))}),d(1),r()}if(c&2){let e=t.$implicit,o=u();v("selected",o.estaSelecionado(e)),s(),R(" ",e.nome," ")}}var C=class c{constructor(t,e,o){this.rotasService=t;this.router=e;this.apiService=o;this.apiService.getCurrentUser().subscribe({next:n=>{n&&n.id?this.memberId=n.id:(console.error("Usu\xE1rio n\xE3o autenticado ou ID n\xE3o encontrado."),alert("Erro: Usu\xE1rio n\xE3o autenticado. Fa\xE7a login novamente."),this.router.navigate(["/login"]))},error:n=>{console.error("Erro ao obter usu\xE1rio:",n),alert("Erro ao carregar usu\xE1rio. Fa\xE7a login novamente."),this.router.navigate(["/login"])}})}nomeRota="";pontosSelecionados=[];memberId;filtro="";pontosDisponiveis=[{id:"2",nome:"Bas\xEDlica de Nossa Senhora de Nazar\xE9"},{id:"11",nome:"Casa das 11 janelas"},{id:"19",nome:"Complexo do Ver-o-Rio"},{id:"17",nome:"Esta\xE7\xE3o das docas"},{id:"1",nome:"Forte do Pres\xE9pio(Forte do Castelo)"},{id:"4",nome:"Igreja da S\xE9"},{id:"6",nome:"Igreja das Merc\xEAs"},{id:"5",nome:"Igreja de Santana"},{id:"3",nome:"Igreja S\xE3o Jo\xE3o Batista"},{id:"8",nome:"Pal\xE1cio Ant\xF4nio Lemos"},{id:"7",nome:"Pal\xE1cio da Resid\xEAncia"},{id:"10",nome:"Paris n'America"},{id:"18",nome:"Parque Urbano Bel\xE9m Porto Futuro(Porto Futuro)"},{id:"13",nome:"Parque Zoobot\xE2nico Mangal das gar\xE7as"},{id:"12",nome:"Parque Zoobot\xE2nico Museu Paraense Em\xEDlio Goeldi"},{id:"14",nome:"Pra\xE7a Batista Campos"},{id:"15",nome:"Pra\xE7a da Rep\xFAblica"},{id:"16",nome:"Pra\xE7a Waldermar Henrique"},{id:"9",nome:"Theatro da Paz"},{id:"20",nome:"Ver-o-Peso"}];get pontosFiltrados(){return this.pontosDisponiveis.filter(t=>t.nome.toLowerCase().includes(this.filtro.toLowerCase()))}togglePonto(t){let e=this.pontosSelecionados.findIndex(o=>o.id===t.id);e>=0?this.pontosSelecionados.splice(e,1):this.pontosSelecionados.push(t)}estaSelecionado(t){return this.pontosSelecionados.some(e=>e.id===t.id)}salvar(){if(this.pontosSelecionados.length===0){alert("Selecione pelo menos um ponto tur\xEDstico!");return}if(!this.nomeRota.trim()){alert("Por favor, insira um nome para a rota!");return}let t={member_id:this.memberId,monuments_id:this.pontosSelecionados.map(e=>Number(e.id)),name:this.nomeRota};console.log("Enviando rota:",t),this.apiService.criarRota(t).subscribe({next:e=>{console.log("Rota criada:",e),this.router.navigate(["/turismo"])},error:e=>{console.error("Erro ao criar rota:",e),alert("Erro ao criar rota. Verifique o console para mais detalhes.")}})}static \u0275fac=function(e){return new(e||c)(l(T),l(w),l(y))};static \u0275cmp=P({type:c,selectors:[["app-create-routes"]],decls:14,vars:4,consts:[[1,"tourism-page"],[1,"input-box"],["placeholder","buscar",3,"ngModelChange","ngModel"],["src","assets/search.svg","alt","buscar"],[1,"input-box-name"],["for","name"],["id","name","placeholder","Nome...",3,"ngModelChange","ngModel"],[1,"btn-box"],[3,"selected","click",4,"ngFor","ngForOf"],[1,"saveButton",3,"click","disabled"],[3,"click"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"h1"),d(2,"Adicionando pontos"),r(),a(3,"div",1)(4,"input",2),f("ngModelChange",function(i){return b(o.filtro,i)||(o.filtro=i),i}),r(),S(5,"img",3),r(),a(6,"div",4)(7,"label",5),d(8,"Insira o nome para rota:"),r(),a(9,"input",6),f("ngModelChange",function(i){return b(o.nomeRota,i)||(o.nomeRota=i),i}),r()(),a(10,"div",7),h(11,B,2,3,"button",8),r(),a(12,"button",9),p("click",function(){return o.salvar()}),d(13," Salvar "),r()()),e&2&&(s(4),g("ngModel",o.filtro),s(5),g("ngModel",o.nomeRota),s(2),m("ngForOf",o.pontosFiltrados),s(),m("disabled",!o.nomeRota.trim()||o.pontosSelecionados.length===0))},dependencies:[O,k,E,I,F],styles:[".tourism-page[_ngcontent-%COMP%]{padding:20px}.input-box[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px;width:100%;max-width:300px;border:1px solid #ccc;border-radius:5px}.input-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);width:20px;height:20px}.input-box-name[_ngcontent-%COMP%]{margin-bottom:20px}.input-box-name[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.input-box-name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px;width:100%;max-width:300px;border:1px solid #ccc;border-radius:5px}.btn-box[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin:10px 0}.btn-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px;border:1px solid #ccc;border-radius:5px;background-color:#f9f9f9;cursor:pointer}.btn-box[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.saveButton[_ngcontent-%COMP%]{padding:10px 20px;background-color:#008cba;color:#fff;border:none;border-radius:5px;cursor:pointer}.saveButton[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}"]})};export{C as default};

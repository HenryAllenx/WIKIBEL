import{a as N}from"./chunk-LMH4AEN2.js";import{a as V}from"./chunk-H4AUIJL3.js";import{b as C,d as M}from"./chunk-24R3UN2Z.js";import{g as S,h as b}from"./chunk-B4W7MAE2.js";import{$ as R,$a as u,Da as h,Ha as l,Oa as p,Qa as r,Ra as i,Va as E,Wa as I,Xa as d,Za as f,_ as x,_a as a,ab as v,fb as _,ua as m,za as s}from"./chunk-MTZBWO7P.js";function D(n,o){if(n&1&&(r(0,"li")(1,"strong"),a(2),i(),r(3,"p"),a(4),i()()),n&2){let e=o.$implicit;m(2),u(e.name||"Monumento sem nome"),m(2),u(e.description||"Sem descri\xE7\xE3o")}}function y(n,o){if(n&1&&(r(0,"div")(1,"ul"),l(2,D,5,2,"li",5),i()()),n&2){let e=d(2);m(2),p("ngForOf",e.monumentos)}}function A(n,o){n&1&&(r(0,"p"),a(1,"Nenhum monumento associado a esta rota."),i())}function T(n,o){if(n&1&&(r(0,"div")(1,"h2"),a(2),i(),r(3,"p"),a(4),i(),r(5,"p"),a(6),i(),r(7,"h3"),a(8,"Monumentos Associados"),i(),l(9,y,3,1,"div",3)(10,A,2,0,"ng-template",null,1,_),i()),n&2){let e=f(11),t=d();m(2),u(t.rotasService.getNomeDaRota(t.rota.id)),m(2),v("ID da Rota: ",t.rota.id,""),m(2),v("ID do Membro: ",t.rota.member_id,""),m(3),p("ngIf",t.monumentos.length>0)("ngIfElse",e)}}function w(n,o){n&1&&(r(0,"p"),a(1,"Rota n\xE3o encontrada."),i())}var g=class n{constructor(o,e,t,c){this.route=o;this.router=e;this.rotasService=t;this.apiService=c}rota=null;monumentos=[];ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o&&this.carregarRota(+o)}carregarRota(o){this.rotasService.obterRotas().subscribe({next:e=>{this.rota=e.find(t=>t.id===o)||null,this.rota&&this.rota.monuments_id&&this.carregarMonumentos(this.rota.monuments_id)},error:e=>{console.error("Erro ao buscar rota:",e),alert("Erro ao carregar a rota.")}})}carregarMonumentos(o){if(this.monumentos=[],!o||o.length===0){console.warn("Nenhum ID de monumento fornecido.");return}o.forEach(e=>{this.apiService.getMonumentoById(e).subscribe({next:t=>{console.log(`Monumento ${e}:`,t),(!t.name||!t.description)&&console.warn(`Monumento ${e} n\xE3o possui nome ou descri\xE7\xE3o.`),this.monumentos.push(t)},error:t=>{console.error(`Erro ao buscar monumento ${e}:`,t),this.monumentos.push({id:e,name:`Monumento ID ${e} (Erro ao carregar)`,description:"N\xE3o foi poss\xEDvel carregar os detalhes.",longitude:null,latitude:null,founding_year:0,district:"",open_hours:"",image:""})}})})}voltar(){this.router.navigate(["/turismo"])}static \u0275fac=function(e){return new(e||n)(s(C),s(M),s(N),s(V))};static \u0275cmp=h({type:n,selectors:[["app-ver-rotas"]],decls:8,vars:2,consts:[["rotaNaoEncontrada",""],["semMonumentos",""],[1,"container"],[4,"ngIf","ngIfElse"],[3,"click"],[4,"ngFor","ngForOf"]],template:function(e,t){if(e&1){let c=E();r(0,"div",2)(1,"h1"),a(2,"Detalhes da Rota"),i(),l(3,T,12,5,"div",3)(4,w,2,0,"ng-template",null,0,_),r(6,"button",4),I("click",function(){return x(c),R(t.voltar())}),a(7,"Voltar"),i()()}if(e&2){let c=f(5);m(3),p("ngIf",t.rota)("ngIfElse",c)}},dependencies:[S,b],encapsulation:2})};export{g as default};

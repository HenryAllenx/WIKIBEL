import{a as S}from"./chunk-N763ELA5.js";import{a as _,b as l,c as M,d as y,f as F,g as O,h as x,i as P,k}from"./chunk-PIG74YNB.js";import{a as C}from"./chunk-H4AUIJL3.js";import{d as h,e as v}from"./chunk-24R3UN2Z.js";import{i as b}from"./chunk-B4W7MAE2.js";import{Da as u,Oa as d,Qa as o,Ra as i,Sa as s,Wa as f,_a as a,ua as g,za as n}from"./chunk-MTZBWO7P.js";var c=class p{constructor(m,e,t,r){this.fb=m;this.apiService=e;this.authService=t;this.router=r;this.loginForm=this.fb.group({email:["",[l.required,l.email]],password:["",l.required]})}loginForm;onLogin(){if(this.loginForm.valid){let m=this.loginForm.value;this.apiService.login(m).subscribe({next:e=>{console.log("Resposta do login:",e);let t=e.token||e.access_token,r=t?JSON.parse(atob(t.split(".")[1])).sub:null;t&&r?(this.authService.login(t,r),console.log("Token e ID salvos via AuthService:",t,r),this.router.navigate(["/home"])):alert("Erro: token ou ID n\xE3o recebido.")},error:e=>{console.error("Erro no login:",e),alert("Falha no login. Verifique suas credenciais.")}})}}static \u0275fac=function(e){return new(e||p)(n(P),n(C),n(S),n(h))};static \u0275cmp=u({type:p,selectors:[["app-login"]],decls:17,vars:1,consts:[[1,"login-wrapper"],[1,"login-area"],[3,"ngSubmit","formGroup"],[1,"input-box"],["src","assets/Mail.svg","alt","profile"],["type","email","formControlName","email","placeholder","Email"],["src","assets/Key.svg","alt","lock"],["type","password","formControlName","password","placeholder","Senha"],["type","submit"],["routerLink","/register"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Login"),i(),o(4,"form",2),f("ngSubmit",function(){return t.onLogin()}),o(5,"div",3),s(6,"img",4)(7,"input",5),i(),o(8,"div",3),s(9,"img",6)(10,"input",7),i(),o(11,"button",8),a(12,"Login"),i()(),o(13,"a"),a(14,"N\xE3o tem conta? Crie uma agora "),o(15,"span",9),a(16,"Registrar"),i()()()()),e&2&&(g(4),d("formGroup",t.loginForm))},dependencies:[b,k,F,_,M,y,O,x,v],styles:['@charset "UTF-8";.login-wrapper[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.login-area[_ngcontent-%COMP%]{justify-content:center;padding:2rem;border-radius:.5rem;display:flex;flex-direction:column;gap:1rem;align-items:center;height:34rem;margin-bottom:5rem}h1[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{color:#2e4159}span[_ngcontent-%COMP%]{color:#2e4159;font-size:1.2rem}.input-box[_ngcontent-%COMP%]{display:flex;align-items:center;width:20rem;margin-bottom:1rem}.input-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.35rem;height:1.33rem;background:#2e4159;border-top-left-radius:.5rem;border-bottom-left-radius:.5rem;object-fit:contain;padding:.4rem;border-left:transparent}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff;background:#2e4159;border:none;border-top-right-radius:.5rem;border-bottom-right-radius:.5rem;padding:.5rem;width:100%;font-size:1rem}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]::placeholder{color:#fff}button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-left:7rem;font-family:Oregano,cursive;color:#fff;background:#7289a6;font-size:1.5rem;border:none;margin-top:4rem;width:5rem;height:2.5rem;border-radius:.5rem}']})};export{c as default};
